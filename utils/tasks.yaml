initial_task:
  description: >
    As the frontman, you need to coordinate the analysis of this query: "{query}"
    
    Follow these steps:
    1. Break down the query to identify the specific data analysis needs
    2. Determine which dataset(s) would be most appropriate for this analysis
    3. Plan the high-level approach for analyzing and visualizing the data
    4. Provide clear instructions for the analyst and visualizer agents
    
    Remember, your role is to coordinate and manage the work of the other agents,
    ensuring they have the information they need to complete their tasks effectively.
  expected_output: >
    A comprehensive breakdown of the query, including:
    - The specific data analysis questions to be answered
    - The recommended dataset(s) to use
    - The high-level approach for analysis and visualization
    - Clear instructions for the analyst and visualizer agents
  agent: frontman

analysis_task:
  description: >
    Analyze the data based on this query: "{query}"
    
    Follow these steps:
    1. Determine which dataset from the available data paths would be most relevant
    2. Load and examine the data
    3. Perform appropriate analyses based on the query
    4. Extract key insights and relevant metrics
    5. Summarize your findings
    
    Your output MUST be in the format of a JSON object with the following structure:
    {{
        "summary": "A concise summary of your analysis findings",
        "insights": ["Insight 1", "Insight 2", "Insight 3", ...],
        "metrics": {{"metric_name1": value1, "metric_name2": value2, ...}}
    }}
    
    Ensure the JSON is properly formatted and contains all required fields.
  expected_output: >
    A properly formatted JSON object containing:
    - summary: A concise summary of the analysis findings
    - insights: A list of key insights from the data
    - metrics: A dictionary of important metrics calculated during analysis
  agent: data_analyst
  guardrail: validate_analysis_output
  callback: track_analysis_completion
  max_retries: 3

visualization_task:
  description: >
    Create data visualizations based on this query: "{query}"
    
    Use the analysis results from the analyst task as context.
    
    Follow these steps:
    1. Review the analysis results to understand what to visualize
    2. Determine the most appropriate visualization type (bar chart, line graph, scatter plot, etc.)
    3. Create the visualization using appropriate data
    4. Save the visualization to a file in the 'outputs' directory
    5. Write a brief description of what the visualization shows
    
    Your output MUST be in the format of a JSON object with the following structure:
    {{
        "chart_type": "The type of visualization created",
        "visualization_data": {{"x_values": [...], "y_values": [...], ...}},
        "description": "A description of what the visualization shows",
        "plot_path": "Path to the saved visualization file"
    }}
    
    Ensure the JSON is properly formatted and contains all required fields.
  expected_output: >
    A properly formatted JSON object containing:
    - chart_type: The type of visualization created
    - visualization_data: Data used for the visualization
    - description: A description of what the visualization shows
    - plot_path: Path to the saved visualization file
  agent: data_visualizer
  output_file: outputs/visualization_result.json
  create_directory: true
  guardrail: validate_visualization_output
  callback: track_visualization_completion
  max_retries: 3
  context: [analysis_task]